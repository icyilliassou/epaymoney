(function(){var t={2348:function(t,e,s){"use strict";var a=s(6369),r=function(){var t=this,e=t._self._c;return e("div",{class:[{darkMode:t.dark}],attrs:{id:"app"}},[t.auth?e("nav",{staticClass:"navbar navbar-expand-lg navbarBack"},[e("div",{staticClass:"container-fluid"},[e("a",{staticClass:"navbar-brand",attrs:{href:"#"}},[t._v("Dashboard SPA")]),e("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarSupportedContent"}},[e("ul",{staticClass:"navbar-nav me-auto mb-2 mb-lg-0"},[e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:"/home"}},[t._v("Accueil")])],1),e("li",{staticClass:"nav-item dropdown"},[e("a",{staticClass:"nav-link dropdown-toggle",attrs:{href:"#",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}},[t._v(" API REST ")]),e("ul",{staticClass:"dropdown-menu"},[e("li",[e("router-link",{staticClass:"dropdown-item",attrs:{to:"/docs"}},[t._v("Introduction")])],1),e("li",[e("router-link",{staticClass:"dropdown-item",attrs:{to:"/docs"}},[t._v("Documentation")])],1),t._m(0)])]),e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:"/sandbox"}},[t._v("SandBox")])],1),e("li",{staticClass:"nav-item dropdown"},[e("a",{staticClass:"nav-link dropdown-toggle",attrs:{href:"#",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}},[t._v(" Paramètres ")]),e("ul",{staticClass:"dropdown-menu"},[e("li",[e("router-link",{staticClass:"dropdown-item",attrs:{to:"/profil"}},[t._v("Profil")])],1),e("li",[e("router-link",{staticClass:"dropdown-item",attrs:{to:"/updatepassword"}},[t._v("Modifier mot de passe")])],1),e("li",[e("div",{staticClass:"form-check form-switch"},[e("label",{staticClass:"form-check-label font-weight-bold",attrs:{for:"flexSwitchCheckChecked"}},[t._v("Thème sombre")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.dark,expression:"dark"}],staticClass:"form-check-input",attrs:{type:"checkbox",role:"switch",id:"flexSwitchCheckChecked"},domProps:{checked:Array.isArray(t.dark)?t._i(t.dark,null)>-1:t.dark},on:{change:function(e){var s=t.dark,a=e.target,r=!!a.checked;if(Array.isArray(s)){var n=null,o=t._i(s,n);a.checked?o<0&&(t.dark=s.concat([n])):o>-1&&(t.dark=s.slice(0,o).concat(s.slice(o+1)))}else t.dark=r}}})])]),t._m(1)])])]),e("span",{staticClass:"navbar-text"},[e("a",{staticClass:"nav-link",attrs:{href:"#"}},[t._v("Montant : "+t._s(t.sold())+" CFA")])]),t._v("                    "),e("span",{staticClass:"navbar-text"},[e("router-link",{staticClass:"nav-link",attrs:{to:"/login"}},[t._v("Deconnexion")])],1)])])]):t._e(),e("router-view")],1)},n=[function(){var t=this,e=t._self._c;return e("li",[e("hr",{staticClass:"dropdown-divider"})])},function(){var t=this,e=t._self._c;return e("li",[e("hr",{staticClass:"dropdown-divider"})])}],o={data(){return{solde:null,dark:null}},mounted:function(){-1==this.$store.getters.getTokens.userId&&this.$router.push("login")},computed:{auth(){return this.$store.getters.isAuthentificate}},methods:{sold(){return this.$store.dispatch("balance",{userid:this.$store.getters.getTokens.userId}).then((t=>{this.solde=t.data.balance})).catch((t=>{console.log(t)})),this.solde}}},i=o,l=s(1001),c=(0,l.Z)(i,r,n,!1,null,null,null),d=c.exports,u=s(2631),m=function(){var t=this,e=t._self._c;return e("LoginComponent")},p=[],f=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container-fluid h-custom"},[e("div",{staticClass:"row d-flex justify-content-center align-items-center h-100"},[t._m(0),e("div",{staticClass:"col-md-8 col-lg-6 col-xl-4 offset-xl-1"},[e("form",[t._m(1),e("div",{staticClass:"form-outline mb-4"},[e("label",{staticClass:"form-label",attrs:{for:"form3Example3"}},[t._v("Address Mail")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.login,expression:"login"}],staticClass:"form-control form-control-lg",attrs:{type:"email",id:"form3Example3",placeholder:"Ex: address@mail.com"},domProps:{value:t.login},on:{input:function(e){e.target.composing||(t.login=e.target.value)}}})]),e("div",{staticClass:"form-outline mb-3"},[e("label",{staticClass:"form-label",attrs:{for:"form3Example4"}},[t._v("Mot de passe")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.passwd,expression:"passwd"}],staticClass:"form-control form-control-lg",attrs:{type:"password",id:"form3Example4",placeholder:"Entrez votre de passe"},domProps:{value:t.passwd},on:{input:function(e){e.target.composing||(t.passwd=e.target.value)}}})]),e("div",{staticClass:"d-flex justify-content-between align-items-center"},[t._m(2),e("a",{staticClass:"text-body",attrs:{href:"#!"},on:{click:t.forgetPassword}},[t._v("Mot de passe oublié?")])]),e("div",{staticClass:"text-center text-lg-start mt-4 pt-2"},[e("button",{staticClass:"btn btn-success btn-lg",staticStyle:{"padding-left":"2.5rem","padding-right":"2.5rem"},attrs:{type:"button"},on:{click:t.connect}},[t._v(" Se connecter ")]),e("p",{staticClass:"small fw-bold mt-2 pt-1 mb-0"},[t._v(" Vous n'avez pas de compte? "),e("a",{staticClass:"link-danger",attrs:{href:"#!"},on:{click:t.register}},[t._v("S'inscrire")])])])])])])])},v=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-md-9 col-lg-6 col-xl-5"},[e("img",{staticClass:"img-fluid",attrs:{src:s(9809),alt:"Sample image"}})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"divider d-flex align-items-center my-4"},[e("p",{staticClass:"text-center fw-bold mx-3 mb-0"},[t._v("Connexion")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"form-check mb-0"},[e("input",{staticClass:"form-check-input me-2",attrs:{type:"checkbox",value:"",id:"form2Example3"}}),e("label",{staticClass:"form-check-label",attrs:{for:"form2Example3"}},[t._v(" Se souvenir de moi ")])])}],h={name:"LoginComponent",data(){return{login:null,passwd:null}},methods:{isConnect(t){this.$store.commit("isAuthentificate",t)},forgetPassword(){this.$router.push("forget")},connect(){this.$store.dispatch("login",{email:this.login,password:this.passwd}).then((t=>{console.log(t.data),this.isConnect(!0),this.$router.push("home")})).catch((t=>{alert("Paire login / mot de passe incorrete"),console.log(t)}))},register(){this.$router.push("signup")}}},g=h,C=(0,l.Z)(g,f,v,!1,null,"a6f4e2c0",null),_=C.exports,b={name:"LoginView",components:{LoginComponent:_},mounted:function(){let t={userId:-1,token:""};this.$store.commit("isAuthentificate",!1),-1!=this.$store.getters.getTokens.userId&&this.$store.commit("setTokens",t)}},w=b,y=(0,l.Z)(w,m,p,!1,null,null,null),x=y.exports,k=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home"},[e("SignupComponent")],1)},P=[],A=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container-fluid h-custom"},[e("div",{staticClass:"row d-flex justify-content-center align-items-center h-100"},[t._m(0),e("div",{staticClass:"col-md-8 col-lg-12 col-xl-4 offset-xl-1"},[e("form",[t._m(1),e("div",{staticClass:"form-outline"},[e("label",{staticClass:"form-label",attrs:{for:"firstName"}},[t._v("Prenom")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.firstname,expression:"firstname"}],staticClass:"form-control form-control-lg",attrs:{type:"label",id:"firstName",placeholder:"Ex: Lionel",required:"required"},domProps:{value:t.firstname},on:{input:function(e){e.target.composing||(t.firstname=e.target.value)}}})]),e("div",{staticClass:"form-outline"},[e("label",{staticClass:"form-label",attrs:{for:"lastName"}},[t._v("Nom")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.lastname,expression:"lastname"}],staticClass:"form-control form-control-lg",attrs:{type:"label",id:"lastName",placeholder:"Ex: BONNAVENTURE"},domProps:{value:t.lastname},on:{input:function(e){e.target.composing||(t.lastname=e.target.value)}}})]),e("div",{staticClass:"form-outline"},[e("label",{staticClass:"form-label",attrs:{for:"country"}},[t._v("Pays")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.country,expression:"country"}],staticClass:"form-control form-control-lg",attrs:{type:"label",id:"country",placeholder:"Ex: Senegal"},domProps:{value:t.country},on:{input:function(e){e.target.composing||(t.country=e.target.value)}}})]),e("div",{staticClass:"form-outline"},[e("label",{staticClass:"form-label",attrs:{for:"mailAdress"}},[t._v("Address Mail")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control form-control-lg",attrs:{type:"email",id:"mailAdress",placeholder:"Ex: address@mail.com"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),e("div",{staticClass:"form-outline"},[e("label",{staticClass:"form-label",attrs:{for:"password"}},[t._v("Mot de passe")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.passwd,expression:"passwd"}],staticClass:"form-control form-control-lg",attrs:{type:"password",id:"password",placeholder:"Entrez votre de passe"},domProps:{value:t.passwd},on:{input:function(e){e.target.composing||(t.passwd=e.target.value)}}})]),e("div",{staticClass:"form-outline"},[e("label",{staticClass:"form-label",attrs:{for:"confirmPassword"}},[t._v("Confirmer mot de passe")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.Confirmpasswd,expression:"Confirmpasswd"}],staticClass:"form-control form-control-lg",attrs:{type:"password",id:"confirmPassword",placeholder:"Entrez votre de passe"},domProps:{value:t.Confirmpasswd},on:{input:function(e){e.target.composing||(t.Confirmpasswd=e.target.value)}}})]),e("div",{staticClass:"text-center text-lg-start mt-2 pt-2"},[e("button",{staticClass:"btn btn-success btn-lg",staticStyle:{"padding-left":"2.5rem","padding-right":"2.5rem"},attrs:{type:"button",disabled:!t.validData},on:{click:t.signup}},[t._v(" S'inscrire ")]),e("p",{staticClass:"small fw-bold mt-2 pt-1 mb-0"},[t._v(" Vous avez déjà un compte? "),e("a",{staticClass:"link-danger",attrs:{href:"#!"},on:{click:t.login}},[t._v("Se connecter")])])])])])])])},q=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-md-9 col-lg-6 col-xl-5"},[e("img",{staticClass:"img-fluid",attrs:{src:s(9809),alt:"Sample image"}})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"divider d-flex align-items-center my-1"},[e("p",{staticClass:"text-center fw-bold mx-3 mb-0"},[t._v("Inscription")])])}],$={name:"SignupComponent",data(){return{firstname:null,lastname:null,country:null,email:null,passwd:null,Confirmpasswd:null}},computed:{validFName(){return null!=this.firstname&&""!=this.firstname},validLName(){return null!=this.lastname&&""!=this.lastname},validCountry(){return null!=this.country&&""!=this.country},validMail(){return null!=this.email&&""!=this.email},samePasswd(){return null!=this.passwd&&null!=this.Confirmpasswd&&(""!=this.passwd&&""!=this.Confirmpasswd&&this.passwd==this.Confirmpasswd)},validData(){return this.validFName&&this.validLName&&this.validCountry&&this.validMail&&this.samePasswd}},methods:{signup(){const t={firstname:this.firstname,lastname:this.lastname,country:this.country,email:this.email,password:this.passwd};this.$store.dispatch("signup",t).then((()=>{alert("Compte créeer avec success !"),this.$router.push("active")})).catch((t=>{console.log(t),alert("Erreur lors de la création du compte !")}))},login(){this.$router.push("login")}}},M=$,S=(0,l.Z)(M,A,q,!1,null,"fbf8126c",null),E=S.exports,N={name:"SignupView",components:{SignupComponent:E},mounted:function(){let t={userId:-1,token:""};this.$store.commit("isAuthentificate",!1),-1!=this.$store.getters.getTokens.userId&&this.$store.commit("setTokens",t)}},I=N,j=(0,l.Z)(I,k,P,!1,null,null,null),T=j.exports,U=function(){var t=this,e=t._self._c;return e("div",[e("HomeContentComponent")],1)},R=[],Z=function(){var t=this,e=t._self._c;return e("div",[e("header",{attrs:{id:"head"}},[e("div",{staticClass:"container"},[e("div",{staticClass:"row"},[e("h1",{staticClass:"lead"},[t._v("Epay")]),e("p",{staticClass:"tagline"},[t._v("Votre API securisé de transaction")]),e("p",[e("a",{staticClass:"btn btn-default btn-lg",attrs:{role:"button"},on:{click:t.tester}},[t._v("Tester l'API")]),e("a",{staticClass:"btn btn-action btn-lg btn-success",attrs:{role:"button"},on:{click:t.docs}},[t._v("Documentation")])])])])]),t._m(0),t._m(1)])},O=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"container text-center"},[e("br"),e("br"),e("h2",{staticClass:"thin"},[t._v(" Le meilleur moyen d'effectuer votre transaction de manière securisé ")]),e("p",{staticClass:"text-muted"},[t._v(" Decouvrez comment integrer l'API Epay à votre système pour reçevoir vos paiement en toute securité ")])])},function(){var t=this,e=t._self._c;return e("footer",{staticClass:"top-space",attrs:{id:"footer"}},[e("div",{staticClass:"footer2"},[e("div",{staticClass:"container"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6 widget"},[e("div",{staticClass:"widget-body"},[e("p",{staticClass:"simplenav"},[e("a",{attrs:{href:"#"}},[t._v("Acceuil")]),t._v(" | "),e("a",{attrs:{href:"about.html"}},[t._v("API REST")]),t._v(" | "),e("a",{attrs:{href:"#"}},[t._v("Sandbox")]),t._v(" | "),e("a",{attrs:{href:"#"}},[t._v("Paramètres")]),t._v(" | "),e("b",[e("a",{attrs:{href:"#"}},[t._v("Deconnexion")])])])])]),e("div",{staticClass:"col-md-6 widget"},[e("div",{staticClass:"widget-body"},[e("p",{staticClass:"text-right"},[t._v(" Copyright © 2022, Chaibou Yahaya Illiassou - Tsowou Makafui ")])])])])])])])}],D={name:"HomeContentComponent",data(){return{}},methods:{docs(){this.$router.push("docs")},tester(){this.$router.push("sandbox")}}},z=D,L=(0,l.Z)(z,Z,O,!1,null,"dc66bc9a",null),V=L.exports,F={name:"HomeView",components:{HomeContentComponent:V},mounted:function(){-1==this.$store.getters.getTokens.userId&&this.$router.push("login")}},B=F,H=(0,l.Z)(B,U,R,!1,null,null,null),G=H.exports,K=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"gauche"},[e("SideBarComponent",{on:{changerEtat:t.test}})],1),e("div",{staticClass:"droite"},[e("DocsContentComponent",{attrs:{type:t.etat}})],1)])},X=[],Y=function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex-shrink-0 p-3 bg-white",staticStyle:{width:"280px"}},[e("a",{staticClass:"d-flex align-items-center pb-3 mb-3 link-dark text-decoration-none border-bottom",attrs:{href:"/"}},[e("svg",{staticClass:"bi me-2",attrs:{width:"30",height:"24"}},[e("use",{attrs:{"xlink:href":"#bootstrap"}})]),e("span",{staticClass:"fs-5 fw-semibold"},[t._v("Documentation")])]),e("ul",{staticClass:"list-unstyled ps-0"},[e("li",{staticClass:"mb-1"},[e("button",{staticClass:"btn btn-toggle align-items-center rounded collapsed",attrs:{"data-bs-toggle":"collapse","data-bs-target":"#home-collapse","aria-expanded":"true"}},[t._v(" API REST ")]),e("div",{staticClass:"collapse show",attrs:{id:"home-collapse"}},[e("ul",{staticClass:"btn-toggle-nav list-unstyled fw-normal pb-1 small"},[e("li",[e("a",{staticClass:"link-dark rounded",attrs:{href:"#"},on:{click:[function(e){return t.$emit("changerEtat",t.val)},t.clickIntroduction]}},[t._v("Introduction")])]),e("li",[e("a",{staticClass:"link-dark rounded",attrs:{href:"#"},on:{click:[function(e){return t.$emit("changerEtat",t.val)},t.clickSingin]}},[t._v("Signin")])]),e("li",[e("a",{staticClass:"link-dark rounded",attrs:{href:"#"},on:{click:[function(e){return t.$emit("changerEtat",t.val)},t.clickSingup]}},[t._v("Signup")])]),e("li",[e("a",{staticClass:"link-dark rounded",attrs:{href:"#"},on:{click:[function(e){return t.$emit("changerEtat",t.val)},t.clickSendConfirm]}},[t._v("Send Confirmation")])]),e("li",[e("a",{staticClass:"link-dark rounded",attrs:{href:"#"},on:{click:[function(e){return t.$emit("changerEtat",t.val)},t.clickActiveAccount]}},[t._v("Active Account")])]),e("li",[e("a",{staticClass:"link-dark rounded",attrs:{href:"#"},on:{click:[function(e){return t.$emit("changerEtat",t.val)},t.clickResetPassword]}},[t._v("Reset password")])]),e("li",[e("a",{staticClass:"link-dark rounded",attrs:{href:"#"},on:{click:[function(e){return t.$emit("changerEtat",t.val)},t.clickGetUser]}},[t._v("Get User by Mail")])]),e("li",[e("a",{staticClass:"link-dark rounded",attrs:{href:"#"},on:{click:[function(e){return t.$emit("changerEtat",t.val)},t.clickEditProfil]}},[t._v("Edit profil")])]),e("li",[e("a",{staticClass:"link-dark rounded",attrs:{href:"#"},on:{click:[function(e){return t.$emit("changerEtat",t.val)},t.clickSoldAccount]}},[t._v("Sold Account")])]),e("li",[e("a",{staticClass:"link-dark rounded",attrs:{href:"#"},on:{click:[function(e){return t.$emit("changerEtat",t.val)},t.clickAddArticle]}},[t._v("Add Article")])])])])]),e("li",{staticClass:"border-top my-3"})])])},Q=[],J={name:"SideBarComponent",data(){return{val:"introduction"}},methods:{clickSingin(){this.val="signin"},clickSingup(){this.val="signup"},clickResetPassword(){this.val="resetpassword"},clickSendConfirm(){this.val="sendconfirm"},clickActiveAccount(){this.val="activeaccount"},clickGetUser(){this.val="getbymail"},clickEditProfil(){this.val="editprofile"},clickSoldAccount(){this.val="soldaccount"},clickAddArticle(){this.val="addarticle"},clickIntroduction(){this.val="introduction"}}},W=J,tt=(0,l.Z)(W,Y,Q,!1,null,"57b1989b",null),et=tt.exports,st=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"row"},["introduction"==t.type?e("div",{staticClass:"row text-start"},[t._m(0),t._m(1)]):t._e()]),e("div",{staticClass:"row"},["signin"==t.type?e("div",{staticClass:"row text-start"},[t._m(2),t._m(3),e("h3",[t._v("Routes signin")]),e("code",[t._v("router.post('/user/signin', userCtrl.signin); ")]),e("h3",[t._v("Code de l'API")]),e("br"),t._m(4)]):t._e()]),"signup"==t.type?e("div",{staticClass:"row"},[t._m(5),t._m(6)]):t._e(),"sendconfirm"==t.type?e("div",{staticClass:"row"},[t._m(7),t._m(8)]):t._e(),"activeaccount"==t.type?e("div",{staticClass:"row"},[t._m(9),t._m(10)]):t._e(),"resetpassword"==t.type?e("div",{staticClass:"row"},[t._m(11),t._m(12)]):t._e(),"getbymail"==t.type?e("div",{staticClass:"row"},[t._m(13),t._m(14)]):t._e(),"editprofile"==t.type?e("div",{staticClass:"row"},[t._m(15),t._m(16)]):t._e(),"soldaccount"==t.type?e("div",{staticClass:"row"},[t._m(17),t._m(18)]):t._e(),"addarticle"==t.type?e("div",{staticClass:"row"},[t._m(19),t._m(20)]):t._e()])},at=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("h1",{staticClass:"text-start"},[t._v("Introduction")])])},function(){var t=this,e=t._self._c;return e("p",[t._v(" Epay est une API de transction securisé en ligne."),e("br"),t._v("C'est une solutions pour recevoir vos paiements, émettre des paiements, vendre, et assurer une bonne gestion de votre activité."),e("br"),t._v(" Intégrer notre plugin (API) facilement dans votre plateforme en ligne pour permettre à vos clients de payer par Mobile Money et carte bancaire."),e("br"),t._v(" A travers cette documentation, vous allez decouvrir comment fonctionne l'api et comment l'integrer dans votre site web ")])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("h1",{staticClass:"text-start"},[t._v("Signin")])])},function(){var t=this,e=t._self._c;return e("p",[t._v(" Cette route nous permet de nous connecter à notre compte et au dashboard_spa"),e("br"),t._v(" Elle prend un login et un mot de passe , pour fournir en retour un tokens d'une validité de 24 quand les informations sont bonnes"),e("br")])},function(){var t=this,e=t._self._c;return e("pre",[t._v("          "),e("code",[t._v("\n  exports.signin = (req, res) => {\n  User.findOne({ where: { email: req.body.email } })\n    .then(user => {\n      if (!user) {\n        return res.status(401).json({ message: 'Paire email/mot de passe incorrecte' });\n      }\n      bcrypt.compare(req.body.password, user.password)\n        .then(valid => {\n          if (!valid) {\n            return res.status(401).json({ message: 'Paire email/mot de passe incorrecte' });\n          }\n          res.status(200).json({\n            userId: user.userid,\n            token: jwt.sign(\n              { userId: user.userid },\n              'EPAY_TOKEN_SECRET',\n              { expiresIn: '24h' }\n            )\n          });\n\n        })\n        .catch(error => res.status(500).json({ error }));\n    })\n    .catch(error => res.status(500).json({ error }));\n};\n          ")]),t._v("\n        ")])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("h1",{staticClass:"text-start"},[t._v("Signup")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"row text-start"},[e("p",[t._v(" Cette route nous permet de creer un compte client ou marchand"),e("br"),t._v(" Par defaut, elle crée des comptes pour les marchands en prennant en entrée :"),e("br"),t._v(" -Le nom "),e("br"),t._v(" -Le prenom "),e("br"),t._v(" -Le pays "),e("br"),t._v(" -Le mail/teléphone "),e("br"),t._v(" -Le mot de passe "),e("br"),t._v(" -La confirmation du mot de passe "),e("br"),t._v(" Après la création du compte , un mail est envoyé à au marchand pour activer son compte."),e("br"),t._v(" Le compte du client est automatiquement activé. ")]),e("h3",[t._v("Routes signup")]),e("code",[t._v("router.post('/user/signup', userCtrl.signup); ")]),e("h3",[t._v("Code de l'API")]),e("br"),e("pre",[t._v("          "),e("code",[t._v('\n  exports.signup = (req, res) => {\n  bcrypt\n    .hash(req.body.password, 10)\n    .then((hash) => {\n      const user = User.build({\n        phone: req.body.phone,\n        email: req.body.email,\n        password: hash,\n      });\n      user\n        .save()\n        .then((result) => {\n          const profile = Profile.build({\n            userid: result.userid,\n            firstname: req.body.firstname,\n            lastname: req.body.lastname,\n            country: req.body.country,\n            age: req.body.age,\n            isenabled: false,\n          });\n          profile\n            .save()\n            .then((resultProfile) => {\n              let typeUser = "Marchand";\n              if (req.body.type != null) typeUser = req.body.type;\n              const account = Account.build({\n                userid: result.userid,\n                balance: 0,\n                currency: "XOF",\n                type: typeUser,\n              });\n              account\n                .save()\n                .then((resultAccount) =>\n                  res.status(201).json({ result, resultAccount, resultProfile })\n                )\n                .catch((error) => res.status(404).json(error));\n            })\n            .catch((err) => res.status(401).json(err));\n        })\n        .catch((err) => res.status(401).json(err));\n    })\n    .catch((err) => res.status(500).json(err));\n};\n          ')]),t._v("\n        ")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("h1",{staticClass:"text-start"},[t._v("Send Confirm")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"row text-start"},[e("p",[t._v(" Cette route nous permet d'envoyer des mails en genéral et des codes de confirmation en particulier"),e("br"),t._v(" Les codes de confirmation sont envoyé aux utilisateurs après la création de leus comptes ou au utilisateus désirant rénitialiser leurs mot de passes ")]),e("h3",[t._v("Routes signup")]),e("code",[t._v("router.post('/user/sendConfirm', userCtrl.sendMail); ")]),e("br"),e("h3",[t._v("Code de l'API")]),e("br"),e("pre",[t._v("          "),e("code",[t._v('\n  exports.sendMail = (req, res) => {\n  utilitaire.sendConfirmCode(req.body.email, req.body.code, "Activation du compte");\n  res.status(200).json({ Message: "Message envoyé avec success !" });\n}\n          ')]),t._v("\n        ")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("h1",{staticClass:"text-start"},[t._v("Active Account")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"row text-start"},[e("p",[t._v(" Cette route nous permet d'activer un compte après sa création"),e("br"),t._v(" Un mail contenant un code de confirmation est envoyé à l'utilisateur pour activer son compte ")]),e("h3",[t._v("Routes active Account")]),e("code",[t._v("router.post('/user/activeAccount', userCtrl.activeAccount); ")]),e("br"),e("h3",[t._v("Code de l'API")]),e("br"),e("pre",[t._v("          "),e("code",[t._v('\n  exports.activeAccount = (req, res) => {\n  Profile.findOne({ where: { userid: req.body.id, isenabled: 0 } })\n    .then((result) => {\n      Profile.update({ isenabled: 1 }, { where: { userid: result.userid } })\n        .then(() => res.status(200).json({ Message: "Compte activé !!" }))\n        .catch(error => res.status(404).json({ Message: "Echec d\'activation" }))\n    }).catch(error => res.status(500).json({ Message: "Utilisateur non trouvé" }));\n}\n          ')]),t._v("\n        ")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("h1",{staticClass:"text-start"},[t._v("Reset password")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"row text-start"},[e("p",[t._v(" Cette route nous permet de renitialiser un mot de passe après l'avoir oublié"),e("br"),t._v(" Un mail contenant un code de confirmation est envoyé à l'utilisateur pour rénitialiser son mot de passe "),e("br"),t._v(' Par defaut après la renitialisation le mot de passe est défini à "password" ')]),e("h3",[t._v("Routes reset password")]),e("code",[t._v("router.post('/user/resetPassword', userCtrl.resetPassword); ")]),e("br"),e("h3",[t._v("Code de l'API")]),e("br"),e("pre",[t._v("          "),e("code",[t._v('\n  exports.resetPassword = (req, res) => {\n  bcrypt.hash("password", 10).then((hash) => {\n    User.update({ password: hash }, { where: { email: req.body.email } })\n      .then((result) => res.status(201).json(result))\n      .catch((error) => res.status(404).json(error));\n  });\n};')]),t._v("\n        ")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("h1",{staticClass:"text-start"},[t._v("Get user by Mail")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"row text-start"},[e("p",[t._v(" Cette route nous permet de chercher un utilisateur à partir de son adresse mail"),e("br")]),e("h3",[t._v("Routes get user by mail")]),e("code",[t._v("router.post('/user/getUserByMail', userCtrl.getUserByMail); ")]),e("br"),e("h3",[t._v("Code de l'API")]),e("br"),e("pre",[t._v("          "),e("code",[t._v('\nexports.getUserByMail = (req, res) => {\n  User.findOne({ where: { email: req.body.email } })\n    .then((user) => {\n      console.log(req);\n      utilitaire.sendConfirmCode(\n        req.body.email,\n        req.body.code,\n        "Renitialisation du mot de passe"\n      );\n      res.status(200).json(user);\n    })\n    .catch((error) => res.status(404).json(error));\n};')]),t._v("\n        ")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("h1",{staticClass:"text-start"},[t._v("Edit profil")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"row text-start"},[e("p",[t._v(" Cette route nous permet de chercher un utilisateur de modifier les informations de son profil"),e("br")]),e("h3",[t._v("Routes edit user")]),e("p",[t._v(" Cette route prends un middleware qui permet de verifier le tokens de l'utilisteur et securiser la modification ")]),e("code",[t._v("router.post('/profil/editProfile', auth, profilCtrl.editProfile); ")]),e("br"),e("h3",[t._v("Code de l'API")]),e("br"),e("pre",[t._v("          "),e("code",[t._v('\nexports.editProfile = (req, res) => {\n  Profile.update(\n    {\n      fistname: req.body.firstname,\n      lastname: req.body.lastname,\n      country: req.body.country,\n      age: req.body.age,\n    },\n    {\n      where: {\n        userid: req.body.userid,\n      },\n    }\n  )\n    .then(() =>\n      res.status(200).json({ Message: "Information modifié avec succes" })\n    )\n    .catch((err) => res.status(404).json(err));\n};')]),t._v("\n        ")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("h1",{staticClass:"text-start"},[t._v("Sold Account")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"row text-start"},[e("p",[t._v(" Cette route nous permet de solder le compte d'un client pour pouvoir effectuer des achats"),e("br")]),e("h3",[t._v("Routes sold Account")]),e("p",[t._v(" Cette route prends un middleware qui permet de verifier le tokens de l'utilisteur et securiser l'opération ")]),e("code",[t._v("router.post('/account/sold/:userid', auth, accountCtrl.soldAccount); ")]),e("br"),e("h3",[t._v("Code de l'API")]),e("br"),e("pre",[t._v("        "),e("code",[t._v('\n  exports.soldAccount = (req, res) => {\n  const userid = req.params.userid;\n  Account.findOne({\n    where: {\n      userid: userid,\n    },\n  })\n    .then((account) => {\n      let nouveauSolde =\n        parseFloat(account.balance) + parseFloat(req.body.montant);\n      Account.update(\n        { balance: nouveauSolde },\n        {\n          where: {\n            userid: account.userid,\n            type: "client",\n          },\n        }\n      )\n        .then((result) => {\n          if (result == 1)\n            res.status(200).json({ Message: "Solde credité avec success !" });\n          else\n            res.status(500).json({ Message: "Impossible de solder ce compte" });\n        })\n        .catch((err) => res.status(404).json(err));\n    })\n    .catch((err) => res.status(404).json(err));\n};\n        ')]),t._v("\n        ")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("h1",{staticClass:"text-start"},[t._v("Add article")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"row text-start"},[e("p",[t._v(" Cette route permet au client d'effectuer des achats sur le site du marchand"),e("br"),t._v(" Il doit au préalable avoir les fonds nécessaires pour effectuer la transaction ")]),e("h3",[t._v("Routes add article")]),e("p",[t._v(" Cette route prends un middleware qui permet de verifier le tokens de l'utilisteur et securiser l'opération ")]),e("code",[t._v("router.post('/article/addarticle', auth, articleCtrl.addArticle); ")]),e("br"),e("h3",[t._v("Code de l'API")]),e("br"),e("pre",[t._v("          "),e("code",[t._v('\n  exports.addArticle = (req, res) => {\n  let transactionStatus = "waiting";\n  let totalAmmount =\n    parseFloat(req.body.unitprice) * parseFloat(req.body.quantity);\n  const finalAmount =\n    totalAmmount +\n    utils.calculTaxes(totalAmmount, req.body.taxes) +\n    utils.isDefine(req.body.feeas) +\n    utils.isDefine(req.body.adeedfeeas);\n  Account.findOne({\n    where: {\n      userid: utils.getUserId(req),\n      type: "client",\n    },\n  })\n    .then((accountClient) => {\n      if (accountClient.balance >= finalAmount) {\n        transactionStatus = "OK";\n        let nouveauSolde =\n          parseFloat(accountClient.balance) - parseFloat(finalAmount);\n        Account.update(\n          { balance: nouveauSolde },\n          { where: { userid: utils.getUserId(req), type: "client" } }\n        )\n          .then(() => {\n            console.log("Solde client debité");\n            Account.findOne({\n              where: { userid: process.env.MARCHAND, type: "Marchand" },\n            })\n              .then((accountMarchand) => {\n                let nouveauSoldeMarchand =\n                  accountMarchand.balance + finalAmount;\n                Account.update(\n                  { balance: nouveauSoldeMarchand },\n                  {\n                    where: {\n                      userid: process.env.MARCHAND,\n                      type: "Marchand",\n                    },\n                  }\n                )\n                  .then(() => {\n                    const transaction = Transaction.build({\n                      userid: utils.getUserId(req),\n                      status: transactionStatus,\n                      amount: totalAmmount,\n                      currency: "XOF",\n                      identifier: req.body.identifier,\n                      taxes: utils.isDefine(req.body.taxes),\n                      feeas: utils.isDefine(req.body.feeas),\n                      adeedfeeas: utils.isDefine(req.body.adeedfeeas),\n                      finalamount: finalAmount,\n                    });\n                    transaction\n                      .save()\n                      .then((transaction_) => {\n                        const article = Article.build({\n                          name: req.body.name,\n                          idtransaction: transaction_.idtransaction,\n                          unitprice: req.body.unitprice,\n                          quantity: req.body.quantity,\n                          totalprice: totalAmmount,\n                        });\n                        article\n                          .save()\n                          .then(() => {\n                            res\n                              .status(200)\n                              .json({\n                                Message:\n                                  "Etat de la transaction : " +\n                                  transaction_.status,\n                              });\n                          })\n                          .catch((err) => res.status(404).json(err));\n                      })\n                      .catch((err) => res.status(404).json(err));\n                  })\n                  .catch(() =>\n                    res\n                      .status(404)\n                      .json({\n                        Message:\n                          "Erreur lors de l\'ajout des fonds dans le compte marchand",\n                      })\n                  );\n              })\n              .catch(() =>\n                res\n                  .status(404)\n                  .json({ Message: "Erreur du débit du compte client" })\n              );\n          })\n          .catch(() =>\n            res\n              .status(404)\n              .json({ Message: "Erreur du débit du compte client" })\n          );\n      } else res.status(404).json({ Message: "Solde insuffisant !" });\n    })\n    .catch((error) => res.status(404).json(error));\n};\n          ')]),t._v("\n        ")])])}],rt={name:"DocsContentComponent",props:{type:String},data(){return{}}},nt=rt,ot=(0,l.Z)(nt,st,at,!1,null,"232a660e",null),it=ot.exports,lt={name:"DocumentationView",components:{SideBarComponent:et,DocsContentComponent:it},data(){return{etat:"introduction"}},mounted:function(){-1==this.$store.getters.getTokens.userId&&this.$router.push("login")},methods:{test(t){this.etat=t}}},ct=lt,dt=(0,l.Z)(ct,K,X,!1,null,null,null),ut=dt.exports,mt=function(){var t=this,e=t._self._c;return e("ConfirmationCodeComponent",{attrs:{type:"active"}})},pt=[],ft=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container d-flex flex-column"},[e("div",{staticClass:"row align-items-center justify-content-center min-vh-100 g-0"},[e("div",{staticClass:"col-12 col-md-8 col-lg-4 border-top border-3 border-success"},[e("div",{staticClass:"card shadow-sm"},[e("div",{staticClass:"card-body"},[t._m(0),e("form",[e("div",{staticClass:"mb-3"},[e("label",{staticClass:"form-label",attrs:{for:"code"}},[t._v("Code")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],staticClass:"form-control",attrs:{type:"text",id:"code",name:"code",placeholder:"Entrer le code à 6 chiffre",required:""},domProps:{value:t.code},on:{input:function(e){e.target.composing||(t.code=e.target.value)}}})]),e("div",{staticClass:"mb-3 d-grid"},["active"==t.type?e("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:t.active}},[t._v(" Activer compte ")]):t._e(),"reset"==t.type?e("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:t.reset}},[t._v(" Renitialiser mot de passe ")]):t._e()]),e("span",[t._v("Vous n'avez pas reçu de mail? "),e("a",{attrs:{href:"#"},on:{click:t.changerAdresse}},[t._v("Changer d'adresse mail")])])])])])])])])},vt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"mb-4"},[e("h5",[t._v("Saisir le code de confirmation")]),e("p",{staticClass:"mb-2"},[t._v("Veuillez saisir le code reçu sur votre mail")])])}],ht={name:"ConfirmationCodeComponent",props:{type:String},data(){return{code:null}},methods:{active(){this.$store.dispatch("active",{code:this.code}).then((t=>{t&&this.$router.push("home")})).catch((t=>console.log(t)))},reset(){this.$store.dispatch("reset",{code:this.code}).then((t=>{t&&this.$router.push("home")})).catch((t=>console.log(t)))},changerAdresse(){"active"==this.type?this.$router.push("signup"):this.$router.push("forget")}}},gt=ht,Ct=(0,l.Z)(gt,ft,vt,!1,null,null,null),_t=Ct.exports,bt={name:"ActiveAccountView",components:{ConfirmationCodeComponent:_t}},wt=bt,yt=(0,l.Z)(wt,mt,pt,!1,null,null,null),xt=yt.exports,kt=function(){var t=this,e=t._self._c;return e("PasswordForgetComponent")},Pt=[],At=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container d-flex flex-column"},[e("div",{staticClass:"row align-items-center justify-content-center min-vh-100 g-0"},[e("div",{staticClass:"col-12 col-md-8 col-lg-4 border-top border-3 border-success"},[e("div",{staticClass:"card shadow-sm"},[e("div",{staticClass:"card-body"},[t._m(0),e("form",[e("div",{staticClass:"mb-3"},[e("label",{staticClass:"form-label",attrs:{for:"email"}},[t._v("Email")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email",id:"email",name:"email",placeholder:"Entrer votre mail",required:""},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),e("div",{staticClass:"mb-3 d-grid"},[e("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:t.reset}},[t._v(" Renitialiser mot de passe ")])]),e("span",[t._v("Vous n'avez pas de compte? "),e("a",{attrs:{href:"#"},on:{click:t.create}},[t._v("Créer compte")])])])])])])])])},qt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"mb-4"},[e("h5",[t._v("Mot de passe oublié?")]),e("p",{staticClass:"mb-2"},[t._v(" Entrez votre adresse mail pour renitialiser votre mot de passe ")])])}],$t={name:"PasswordForgetComponent",data(){return{email:null}},methods:{reset(){this.$store.commit("setResetMail",this.email),console.log(this.$store.getters.getResetMail),this.$store.dispatch("resetPassword").then((t=>{t&&this.$router.push("reset")}))},create(){this.$router.push("signup")}}},Mt=$t,St=(0,l.Z)(Mt,At,qt,!1,null,null,null),Et=St.exports,Nt={name:"PasswordForgetView",components:{PasswordForgetComponent:Et}},It=Nt,jt=(0,l.Z)(It,kt,Pt,!1,null,null,null),Tt=jt.exports,Ut=function(){var t=this,e=t._self._c;return e("ConfirmationCodeComponent",{attrs:{type:"reset"}})},Rt=[],Zt={name:"ResetPasswordView",components:{ConfirmationCodeComponent:_t}},Ot=Zt,Dt=(0,l.Z)(Ot,Ut,Rt,!1,null,null,null),zt=Dt.exports,Lt=function(){var t=this,e=t._self._c;return e("div",["Marchand"==this.$store.getters.getTokens.type?e("CreateUserComponent"):t._e(),"client"==this.$store.getters.getTokens.type?e("TransactionComponent"):t._e()],1)},Vt=[],Ft=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container-fluid h-custom"},[e("div",{staticClass:"row d-flex justify-content-center align-items-center h-100"},[e("div",{staticClass:"col-md-8 col-lg-12 col-xl-4 offset-xl-1"},[e("form",[t._m(0),e("div",{staticClass:"form-outline"},[e("label",{staticClass:"form-label",attrs:{for:"firstName"}},[t._v("Prenom")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.firstname,expression:"firstname"}],staticClass:"form-control form-control-lg",attrs:{type:"label",id:"firstName",placeholder:"Ex: Lionel",required:"required"},domProps:{value:t.firstname},on:{input:function(e){e.target.composing||(t.firstname=e.target.value)}}})]),e("div",{staticClass:"form-outline"},[e("label",{staticClass:"form-label",attrs:{for:"lastName"}},[t._v("Nom")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.lastname,expression:"lastname"}],staticClass:"form-control form-control-lg",attrs:{type:"label",id:"lastName",placeholder:"Ex: BONNAVENTURE"},domProps:{value:t.lastname},on:{input:function(e){e.target.composing||(t.lastname=e.target.value)}}})]),e("div",{staticClass:"form-outline"},[e("label",{staticClass:"form-label",attrs:{for:"country"}},[t._v("Pays")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.country,expression:"country"}],staticClass:"form-control form-control-lg",attrs:{type:"label",id:"country",placeholder:"Ex: Senegal"},domProps:{value:t.country},on:{input:function(e){e.target.composing||(t.country=e.target.value)}}})]),e("div",{staticClass:"form-outline"},[e("label",{staticClass:"form-label",attrs:{for:"mailAdress"}},[t._v("Address Mail")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control form-control-lg",attrs:{type:"email",id:"mailAdress",placeholder:"Ex: address@mail.com"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),e("div",{staticClass:"form-outline"},[e("label",{staticClass:"form-label",attrs:{for:"mailAdress"}},[t._v("Montant")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.montant,expression:"montant"}],staticClass:"form-control form-control-lg",attrs:{type:"number",id:"montant"},domProps:{value:t.montant},on:{input:function(e){e.target.composing||(t.montant=e.target.value)}}})]),e("div",{staticClass:"form-outline"},[e("label",{staticClass:"form-label",attrs:{for:"password"}},[t._v("Mot de passe")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.passwd,expression:"passwd"}],staticClass:"form-control form-control-lg",attrs:{type:"password",id:"password",placeholder:"Entrez votre de passe"},domProps:{value:t.passwd},on:{input:function(e){e.target.composing||(t.passwd=e.target.value)}}})]),e("div",{staticClass:"form-outline"},[e("label",{staticClass:"form-label",attrs:{for:"confirmPassword"}},[t._v("Confirmer mot de passe")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.Confirmpasswd,expression:"Confirmpasswd"}],staticClass:"form-control form-control-lg",attrs:{type:"password",id:"confirmPassword",placeholder:"Entrez votre de passe"},domProps:{value:t.Confirmpasswd},on:{input:function(e){e.target.composing||(t.Confirmpasswd=e.target.value)}}})]),e("div",{staticClass:"text-center text-lg-start mt-2 pt-2"},[e("button",{staticClass:"btn btn-success btn-lg",staticStyle:{"padding-left":"2.5rem","padding-right":"2.5rem"},attrs:{type:"button",disabled:!t.validData},on:{click:t.signup}},[t._v(" Créer utilisateur ")])])])])])])},Bt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"divider d-flex align-items-center my-1"},[e("p",{staticClass:"text-center fw-bold mx-3 mb-0"},[t._v("Creer un nouveau client")])])}],Ht={name:"CreateUserComponent",data(){return{firstname:null,lastname:null,country:null,email:null,passwd:null,Confirmpasswd:null,type:"client",isenabled:!0,montant:null}},computed:{validFName(){return null!=this.firstname&&""!=this.firstname},validLName(){return null!=this.lastname&&""!=this.lastname},validCountry(){return null!=this.country&&""!=this.country},validMail(){return null!=this.email&&""!=this.email},samePasswd(){return null!=this.passwd&&null!=this.Confirmpasswd&&(""!=this.passwd&&""!=this.Confirmpasswd&&this.passwd==this.Confirmpasswd)},validData(){return this.validFName&&this.validLName&&this.validCountry&&this.validMail&&this.samePasswd}},methods:{signup(){const t={firstname:this.firstname,lastname:this.lastname,country:this.country,email:this.email,password:this.passwd,montant:this.montant,isenabled:!0,type:"client"};this.$store.dispatch("signup",t).then((()=>{alert("Compte créeer avec success !"),alert("Vous pouvez à présent vous connecter au compte client et effectuer des achats"),this.$router.push("home")})).catch((t=>{console.log(t),alert("Erreur lors de la création du compte !")}))},login(){this.$router.push("login")}}},Gt=Ht,Kt=(0,l.Z)(Gt,Ft,Bt,!1,null,"580c3de6",null),Xt=Kt.exports,Yt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container-fluid h-custom"},[e("div",{staticClass:"row d-flex justify-content-center align-items-center h-100"},[e("div",{staticClass:"col-md-8 col-lg-12 col-xl-4 offset-xl-1"},[e("form",[t._m(0),e("div",{staticClass:"form-outline"},[e("label",{staticClass:"form-label",attrs:{for:"Price"}},[t._v("Id marchand")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.idmarchand,expression:"idmarchand"}],staticClass:"form-control form-control-lg",attrs:{id:"idmarchand"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.idmarchand=e.target.multiple?s:s[0]}}},t._l(t.ids,(function(s,a){return e("option",{key:a,domProps:{value:s}},[t._v(" "+t._s(s.userid)+" ")])})),0)]),e("div",{staticClass:"form-outline"},[e("label",{staticClass:"form-label",attrs:{for:"Name"}},[t._v("Name :")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form-control form-control-lg",attrs:{type:"label",id:"Name",placeholder:"Ex: Ordinateur",required:"required"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),e("div",{staticClass:"form-outline"},[e("label",{staticClass:"form-label",attrs:{for:"quantity"}},[t._v("Quantity")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.quantity,expression:"quantity"}],staticClass:"form-control form-control-lg",attrs:{type:"number",id:"quantity"},domProps:{value:t.quantity},on:{input:function(e){e.target.composing||(t.quantity=e.target.value)}}})]),e("div",{staticClass:"form-outline"},[e("label",{staticClass:"form-label",attrs:{for:"Price"}},[t._v("Price")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.price,expression:"price"}],staticClass:"form-control form-control-lg",attrs:{type:"number",id:"Price"},domProps:{value:t.price},on:{input:function(e){e.target.composing||(t.price=e.target.value)}}})]),e("div",{staticClass:"form-outline"},[e("label",{staticClass:"form-label",attrs:{for:"Taxes"}},[t._v("Taxes (%)")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.taxes,expression:"taxes"}],staticClass:"form-control form-control-lg",attrs:{type:"number",id:"Taxes"},domProps:{value:t.taxes},on:{input:function(e){e.target.composing||(t.taxes=e.target.value)}}})]),e("div",{staticClass:"text-center text-lg-start mt-2 pt-2"},[e("button",{staticClass:"btn btn-success btn-lg",staticStyle:{"padding-left":"2.5rem","padding-right":"2.5rem"},attrs:{type:"button"},on:{click:t.acheter}},[t._v(" Acheter ")])])])])])])},Qt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"divider d-flex align-items-center my-1"},[e("p",{staticClass:"text-center fw-bold mx-3 mb-0"},[t._v("Acheter article")])])}],Jt={name:"TransactionComponent",data(){return{name:null,price:null,taxes:null,quantity:null,idmarchand:null,ids:[]}},mounted:function(){this.$store.dispatch("getMarchands").then((t=>{this.ids=t.data})).catch((t=>{console.log(t)}))},computed:{},methods:{acheter(){const t={userid:this.$store.getters.getTokens.userId,id:this.idmarchand.userid,name:this.name,unitprice:this.price,quantity:this.quantity,taxes:this.taxes};this.$store.dispatch("transaction",t).then((t=>{alert("Transaction effectué avec success !"),console.log(t.data),this.$router.push("home")})).catch((t=>{console.log(t),alert("Erreur lors de la transaction !")}))}}},Wt=Jt,te=(0,l.Z)(Wt,Yt,Qt,!1,null,"ad92baaa",null),ee=te.exports,se={name:"SandBoxView",components:{CreateUserComponent:Xt,TransactionComponent:ee},mounted:function(){-1==this.$store.getters.getTokens.userId&&this.$router.push("login")}},ae=se,re=(0,l.Z)(ae,Lt,Vt,!1,null,null,null),ne=re.exports,oe=function(){var t=this,e=t._self._c;return e("div",[e("UpdatePasswordComponent")],1)},ie=[],le=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container-fluid h-custom"},[e("div",{staticClass:"row d-flex justify-content-center align-items-center h-100"},[e("div",{staticClass:"col-md-8 col-lg-12 col-xl-4 offset-xl-1"},[e("form",[t._m(0),e("div",{staticClass:"form-outline"},[e("label",{staticClass:"form-label",attrs:{for:"old"}},[t._v("Ancien mot de passe")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.oldpasswd,expression:"oldpasswd"}],staticClass:"form-control form-control-lg",attrs:{type:"password",id:"old",required:"required"},domProps:{value:t.oldpasswd},on:{input:function(e){e.target.composing||(t.oldpasswd=e.target.value)}}})]),e("div",{staticClass:"form-outline"},[e("label",{staticClass:"form-label",attrs:{for:"password"}},[t._v("Mot de passe")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.passwd,expression:"passwd"}],staticClass:"form-control form-control-lg",attrs:{type:"password",id:"password",placeholder:"Entrez votre de passe"},domProps:{value:t.passwd},on:{input:function(e){e.target.composing||(t.passwd=e.target.value)}}})]),e("div",{staticClass:"form-outline"},[e("label",{staticClass:"form-label",attrs:{for:"confirmPassword"}},[t._v("Confirmer mot de passe")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.Confirmpasswd,expression:"Confirmpasswd"}],staticClass:"form-control form-control-lg",attrs:{type:"password",id:"confirmPassword",placeholder:"Entrez votre de passe"},domProps:{value:t.Confirmpasswd},on:{input:function(e){e.target.composing||(t.Confirmpasswd=e.target.value)}}})]),e("div",{staticClass:"text-center text-lg-start mt-2 pt-2"},[e("button",{staticClass:"btn btn-success btn-lg",staticStyle:{"padding-left":"2.5rem","padding-right":"2.5rem"},attrs:{type:"button",disabled:!t.validData},on:{click:t.updatepassword}},[t._v(" Modifier mot de passe ")])])])])])])},ce=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"divider d-flex align-items-center my-1"},[e("p",{staticClass:"text-center fw-bold mx-3 mb-0"},[t._v("Modifier mot de passe")])])}],de={name:"UpdatePasswordComponent",data(){return{oldpasswd:null,passwd:null,Confirmpasswd:null}},computed:{validOld(){return null!=this.oldpasswd&&""!=this.oldpasswd},samePasswd(){return null!=this.passwd&&null!=this.Confirmpasswd&&(""!=this.passwd&&""!=this.Confirmpasswd&&this.passwd==this.Confirmpasswd)},validData(){return this.validOld&&this.samePasswd}},methods:{updatepassword(){const t={id:this.$store.getters.getTokens.userId,oldpassword:this.oldpasswd,password:this.passwd};this.$store.dispatch("updatePassword",t).then((()=>{alert("Mot de passe modifié avec success ! veuillez vous reconnecter"),this.$router.push("login")})).catch((t=>{alert("Echec de la modification du mot de passe !"),console.log(t)}))}}},ue=de,me=(0,l.Z)(ue,le,ce,!1,null,"5e23c696",null),pe=me.exports,fe={name:"UpdatePasswordView",components:{UpdatePasswordComponent:pe},mounted:function(){-1==this.$store.getters.getTokens.userId&&this.$router.push("login")}},ve=fe,he=(0,l.Z)(ve,oe,ie,!1,null,null,null),ge=he.exports,Ce=function(){var t=this,e=t._self._c;return e("div",[e("ProfilInfoComponent")],1)},_e=[],be=function(){var t=this,e=t._self._c;return e("section",{staticClass:"vh-100",staticStyle:{"background-color":"#f4f5f7"}},[e("div",{staticClass:"container py-5 h-100"},[e("div",{staticClass:"row d-flex justify-content-center align-items-center h-100"},[e("div",{staticClass:"col col-lg-6 mb-4 mb-lg-0"},[e("div",{staticClass:"card mb-3",staticStyle:{"border-radius":"0.5rem"}},[e("div",{staticClass:"row g-0"},[e("div",{staticClass:"col-md-4 gradient-custom text-center text-white fond",staticStyle:{"border-top-left-radius":"0.5rem","border-bottom-left-radius":"0.5rem"}},[e("img",{staticClass:"img-fluid my-5",staticStyle:{width:"80px"},attrs:{src:"https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-chat/ava1-bg.webp",alt:"Avatar"}}),e("h5",[t._v(t._s(t.profile.firstname))]),e("p",[t._v(t._s(t.profile.lastname))]),e("i",{staticClass:"far fa-edit mb-5"})]),e("div",{staticClass:"col-md-8"},[e("div",{staticClass:"card-body p-4"},[e("h6",[t._v("Information")]),e("hr",{staticClass:"mt-0 mb-4"}),e("div",{staticClass:"row pt-1"},[e("div",{staticClass:"col-6 mb-3"},[e("h6",[t._v("Age")]),e("p",{staticClass:"text-muted"},[t._v(t._s(t.profile.age))])]),e("div",{staticClass:"col-6 mb-3"},[e("h6",[t._v("Pays")]),e("p",{staticClass:"text-muted"},[t._v(t._s(t.profile.country))])])]),e("h6",[t._v("Actions")]),e("hr",{staticClass:"mt-0 mb-4"}),e("div",{staticClass:"row pt-1"},[e("div",{staticClass:"col-6 mb-3"},[e("button",{staticClass:"btn btn-primary",on:{click:t.update}},[t._v(" Modifier ")])]),e("div",{staticClass:"col-6 mb-3"},[e("button",{staticClass:"btn btn-warning",on:{click:t.password}},[t._v(" Password ")])])]),t._m(0)])])])])])])])])},we=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"d-flex justify-content-start"},[e("a",{attrs:{href:"#!"}},[e("i",{staticClass:"fab fa-facebook-f fa-lg me-3"})]),e("a",{attrs:{href:"#!"}},[e("i",{staticClass:"fab fa-twitter fa-lg me-3"})]),e("a",{attrs:{href:"#!"}},[e("i",{staticClass:"fab fa-instagram fa-lg"})])])}],ye={name:"ProfilInfoComponent",data(){return{profile:null}},mounted:function(){this.$store.dispatch("getUserProfil",this.$store.getters.getTokens.userId).then((t=>{this.profile=t.data})).catch((t=>{console.log(t)}))},computed:{},methods:{password(){this.$router.push("/updatepassword")},update(){this.$router.push("/updateprofil")}}},xe=ye,ke=(0,l.Z)(xe,be,we,!1,null,"022249d0",null),Pe=ke.exports,Ae={name:"ProfilInfoView",components:{ProfilInfoComponent:Pe},mounted:function(){-1==this.$store.getters.getTokens.userId&&this.$router.push("login")}},qe=Ae,$e=(0,l.Z)(qe,Ce,_e,!1,null,null,null),Me=$e.exports,Se=function(){var t=this,e=t._self._c;return e("UpdateProfilComponent")},Ee=[],Ne=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container-fluid h-custom"},[e("div",{staticClass:"row d-flex justify-content-center align-items-center h-100"},[e("div",{staticClass:"col-md-8 col-lg-12 col-xl-4 offset-xl-1"},[e("form",[t._m(0),e("div",{staticClass:"form-outline"},[e("label",{staticClass:"form-label",attrs:{for:"firstName"}},[t._v("Prenom")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.profile.firstname,expression:"profile.firstname"}],staticClass:"form-control form-control-lg",attrs:{type:"label",id:"firstName",required:"required",value:"profile.firstname"},domProps:{value:t.profile.firstname},on:{input:function(e){e.target.composing||t.$set(t.profile,"firstname",e.target.value)}}})]),e("div",{staticClass:"form-outline"},[e("label",{staticClass:"form-label",attrs:{for:"lastName"}},[t._v("Nom")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.profile.lastname,expression:"profile.lastname"}],staticClass:"form-control form-control-lg",attrs:{type:"label",id:"lastName",value:"profile.lastname"},domProps:{value:t.profile.lastname},on:{input:function(e){e.target.composing||t.$set(t.profile,"lastname",e.target.value)}}})]),e("div",{staticClass:"form-outline"},[e("label",{staticClass:"form-label",attrs:{for:"age"}},[t._v("Age")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.profile.age,expression:"profile.age"}],staticClass:"form-control form-control-lg",attrs:{type:"number",id:"age",value:"profile.age"},domProps:{value:t.profile.age},on:{input:function(e){e.target.composing||t.$set(t.profile,"age",e.target.value)}}})]),e("div",{staticClass:"form-outline"},[e("label",{staticClass:"form-label",attrs:{for:"country"}},[t._v("Pays")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.profile.country,expression:"profile.country"}],staticClass:"form-control form-control-lg",attrs:{type:"label",id:"country",value:"profile.country"},domProps:{value:t.profile.country},on:{input:function(e){e.target.composing||t.$set(t.profile,"country",e.target.value)}}})]),e("div",{staticClass:"text-center text-lg-start mt-2 pt-2"},[e("button",{staticClass:"btn btn-success btn-lg",staticStyle:{"padding-left":"2.5rem","padding-right":"2.5rem"},attrs:{type:"button"},on:{click:t.updateProfil}},[t._v(" Modifier profil ")])])])])])])},Ie=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"divider d-flex align-items-center my-1"},[e("p",{staticClass:"text-center fw-bold mx-3 mb-0"},[t._v("Creer un nouveau client")])])}],je={name:"UpdateProfilComponent",data(){return{profile:null}},mounted:function(){this.$store.dispatch("getUserProfil",this.$store.getters.getTokens.userId).then((t=>{this.profile=t.data})).catch((t=>{console.log(t)}))},computed:{},methods:{updateProfil(){const t={id:this.$store.getters.getTokens.userId,firstname:this.profile.firstname,lastname:this.profile.lastname,country:this.profile.country,age:this.profile.age};this.$store.dispatch("editProfil",t).then((()=>{alert("Profil Modifié !"),this.$router.push("profil")})).catch((t=>{console.log(t),alert("Erreur lors de la Modification !")}))}}},Te=je,Ue=(0,l.Z)(Te,Ne,Ie,!1,null,"691d8be0",null),Re=Ue.exports,Ze={name:"UpdateProfilView",components:{UpdateProfilComponent:Re},mounted:function(){-1==this.$store.getters.getTokens.userId&&this.$router.push("login")}},Oe=Ze,De=(0,l.Z)(Oe,Se,Ee,!1,null,null,null),ze=De.exports;a.ZP.use(u.Z);const Le=[{path:"/login",name:"login",component:x},{path:"/signup",name:"signup",component:T},{path:"/home",name:"home",component:G},{path:"/active",name:"active",component:xt},{path:"/docs",name:"docs",component:ut},{path:"/forget",name:"forget",component:Tt},{path:"/reset",name:"reset",component:zt},{path:"/sandbox",name:"sandbox",component:ne},{path:"/updatepassword",name:"updatepassword",component:ge},{path:"/updateprofil",name:"updateprofil",component:ze},{path:"/profil",name:"profil",component:Me}],Ve=new u.Z({routes:Le});var Fe=Ve,Be=(s(8937),s(3822));const He=s(2648);a.ZP.use(Be.ZP);const Ge=s(6265),Ke=Ge.create({baseURL:"https://apiepay.herokuapp.com/api/"});var Xe=new Be.ZP.Store({state:{isAuthentificate:!1,confirmationCode:null,id:null,resetMail:null,resetCode:null,token:{userId:-1,token:"",type:"",balance:""},profil:{}},getters:{getProfil(t){return t.profil},isAuthentificate(t){return t.isAuthentificate},getTokens(t){return t.token},getconfimationCode(t){return t.confirmationCode},getresetCode(t){return t.resetCode},getId(t){return t.id},getResetMail(t){return t.resetMail}},mutations:{isAuthentificate(t,e){t.isAuthentificate=e},setId(t,e){t.id=e},setProfil(t,e){t.profil=e},setResetMail(t,e){t.resetMail=e},setTokens(t,e){t.token=e},setHeaders(t){Ke.defaults.headers.common["Authorization"]=t.token.token},setconfirmationCode(t,e){t.confirmationCode=e},setresetCode(t,e){t.resetCode=e}},actions:{login({commit:t},e){return new Promise(((s,a)=>{Ke.post("/user/signin",e).then((e=>{t("setTokens",e.data),t("setHeaders"),s(e)})).catch((t=>{a(t)}))}))},signup({commit:t},e){return new Promise(((s,a)=>{Ke.post("/user/signup",e).then((a=>{let r=He.makeCode(7);t("setconfirmationCode",r),t("setId",a.data.result.userid),Ke.post("/user/sendConfirm",{email:e.email,code:this.getters.getconfimationCode}),s(a)})).catch((t=>{a(t)}))}))},transaction({commit:t},e){return Ke.defaults.headers.common["Authorization"]=this.getters.getTokens.token,new Promise(((t,s)=>{Ke.post("/article/addarticle",e).then((e=>{t(e)})).catch((t=>{s(t)}))}))},balance({commit:t},e){return Ke.defaults.headers.common["Authorization"]=this.getters.getTokens.token,new Promise(((t,s)=>{Ke.post("/account/balance",e).then((e=>{t(e)})).catch((t=>{s(t)}))}))},active({commit:t},e){if(e.code==this.getters.getconfimationCode)return new Promise(((e,s)=>{const a={id:this.getters.getId};Ke.post("/profile/activeAccount",a).then((s=>{t("setconfirmationCode",""),e(s)})).catch((t=>{s(t)}))}));alert("Code de confirmation incorrect")},resetPassword({commit:t}){let e=He.makeCode(7);t("setconfirmationCode",e);let s={email:this.getters.getResetMail,code:e};return new Promise(((t,e)=>{Ke.post("/user/getUserByMail",s).then((e=>{t(e)})).catch((t=>{console.log(t),e(t)}))}))},reset({commit:t},e){if(e.code==this.getters.getconfimationCode)return new Promise(((e,s)=>{const a={email:this.getters.getResetMail};Ke.post("/user/resetPassword",a).then((s=>{t("setconfirmationCode",""),t("setResetMail",""),e(s)})).catch((t=>{s(t)}))}));console.log("Code non cohérant! ")},getMarchands({commit:t}){return new Promise(((t,e)=>{Ke.get("/account/getmarchands").then((e=>{t(e)})).catch((t=>{e(t)}))}))},updatePassword({commit:t},e){return new Promise(((t,s)=>{Ke.post("/user/updatepassword",e).then((e=>{t(e)})).catch((t=>{s(t)}))}))},getUserProfil({commit:t},e){return new Promise(((s,a)=>{Ke.get("/profile/getuserprofile/"+e).then((e=>{t("setProfil",e.data),s(e)})).catch((t=>{a(t)}))}))},editProfil({commit:t},e){return new Promise(((t,s)=>{Ke.put("/profile/editprofile/",e).then((e=>{t(e)})).catch((t=>{s(t)}))}))}},modules:{}});a.ZP.config.productionTip=!1,new a.ZP({router:Fe,store:Xe,render:t=>t(d)}).$mount("#app")},2648:function(t,e){e.makeCode=t=>{let e="",s="&~#{[|^]}ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=s.length;for(let r=0;r<t;r++)e+=s.charAt(Math.floor(Math.random()*a));return e}},9809:function(t,e,s){"use strict";t.exports=s.p+"img/vue-js-development.1353c393.jpeg"}},e={};function s(a){var r=e[a];if(void 0!==r)return r.exports;var n=e[a]={exports:{}};return t[a](n,n.exports,s),n.exports}s.m=t,function(){var t=[];s.O=function(e,a,r,n){if(!a){var o=1/0;for(d=0;d<t.length;d++){a=t[d][0],r=t[d][1],n=t[d][2];for(var i=!0,l=0;l<a.length;l++)(!1&n||o>=n)&&Object.keys(s.O).every((function(t){return s.O[t](a[l])}))?a.splice(l--,1):(i=!1,n<o&&(o=n));if(i){t.splice(d--,1);var c=r();void 0!==c&&(e=c)}}return e}n=n||0;for(var d=t.length;d>0&&t[d-1][2]>n;d--)t[d]=t[d-1];t[d]=[a,r,n]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var a in e)s.o(e,a)&&!s.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){s.p="/"}(),function(){var t={143:0};s.O.j=function(e){return 0===t[e]};var e=function(e,a){var r,n,o=a[0],i=a[1],l=a[2],c=0;if(o.some((function(e){return 0!==t[e]}))){for(r in i)s.o(i,r)&&(s.m[r]=i[r]);if(l)var d=l(s)}for(e&&e(a);c<o.length;c++)n=o[c],s.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return s.O(d)},a=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(2348)}));a=s.O(a)})();
//# sourceMappingURL=app.f549986a.js.map